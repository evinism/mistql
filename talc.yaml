doc: MistQL Project CLI
commands:
  - name: install
    doc: Install all dependencies in all subdirs
    shell: (cd py && uv venv && uv pip install -e ".[dev]") && (cd js && npm install)
  - name: test
    doc: Test a subproject!
    commands:
      - name: all
        doc: Test everything
        shell:
          "talc test py && talc test js"
      - name: js
        doc: Test the python subproject
        shell:
          "cd js && npm test"
      - name: py
        doc: Test the JS subproject
        shell:
          "cd py && uv run pytest && uv run mypy mistql"
  - name: build
    doc: Build a subproject!
    commands:
      - name: all
        doc: Build everything
        shell:
          "talc build py && talc build js"
      - name: js
        doc: Build the python subproject
        shell:
          "cd js && npm run build"
      - name: py
        doc: Build the JS subproject
        shell:
          "cd py && uv build"
  - name: publish
    doc: Publish subprojects to various platforms
    commands:
      - name: all
        doc: Publish all versions of the project
        shell:
          "talc test all && talc build all && talc dangerous-publish all"
      - name: js
        doc: Publish the python subproject
        shell:
          "talc test js && talc build js && talc dangerous-publish js"
      - name: py
        doc: Publish the JS subproject
        shell:
          "talc test py && talc build py && talc dangerous-publish py"
  - name: dangerous-publish
    doc: Publish without testing (aaa)
    commands:
      - name: all
        doc: Publish all versions of the project
        shell:
          "talc dangerous-publish js && talc dangerous-publish py"
      - name: js
        doc: Publish the python subproject
        shell:
          "cd js && npm publish"
      - name: py
        doc: Publish the JS subproject
        shell:
          "cd py && uv publish"
  - name: docs
    doc: Serves the docs site locally
    shell: (cd docs && npm run start)
